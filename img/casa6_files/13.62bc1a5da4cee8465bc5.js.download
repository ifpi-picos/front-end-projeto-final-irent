(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"/TYn":function(e,t,r){},"0oY5":function(e,t,r){"use strict";var n=r("63Ad");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("MJX+"));t.default=a.default},"17RM":function(e,t,r){"use strict";var n=r("63Ad");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("lOrp"),o=n(r("N3wY")),i=n(r("1eTU")),s=n(r("c2II")),l=n(r("ZqVW")),u=n(r("D8Yr")),c=n(r("3yO6")),d=n(r("BV7y")),p=n(r("gLbD")),f=n(r("VcxY")),m={name:"oz-report-listing-form",props:{listingId:{type:String,required:!0}},data:function(){return{report:{requesterName:"",requesterEmail:"",reasonType:"",description:"",listingId:this.listingId,source:"zap"},selectOptions:f.default,loading:!1,reportSendError:!1,reasonTypeError:!1}},mounted:function(){this.leadUser?this.setUser():(this.report.requesterName=this.userData.name,this.report.requesterEmail=this.userData.email)},computed:Object.assign({},(0,a.mapState)("leads",{leadUser:function(e){return e.lead}}),{},(0,a.mapGetters)({userData:"auth/user"})),methods:{setUser:function(){var e=this.leadUser;Object.assign(this.report,{requesterName:e.name,requesterEmail:e.email})},setLoading:function(e){this.loading=e},sendReport:function(){var e=this;if((0,o.default)(this.$refs).reduce((function(t,r){var n=r.$el.querySelector("select");return n?(e.reasonTypeError=""===n.value,""!==n.value&&r.required):t&&r.isInputValid()}),!0)){this.setLoading(!0);var t=this._createTicket();p.default.send(this.$store,t).then((function(){e.$emit("report:sent"),e.$store.dispatch("leads/saveLead",{name:e.report.requesterName,email:e.report.requesterEmail,phoneNumber:e.leadUser?e.leadUser.phoneNumber:""})})).catch((function(t){throw e.reportSendError=!0,new Error(t)})).finally((function(){e.setLoading(!1)}))}},_createTicket:function(){var e=this.report,t=e.requesterName;return{requesterName:t,requesterEmail:e.requesterEmail,description:e.description+" \n\n Link do an\xfancio: "+(""+window.location.origin+this.$route.fullPath),customFields:[{fieldId:360006344272,value:t},{fieldId:360014612771,value:e.reasonType}],subject:"[CONSUMIDOR] Reportar an\xfancio: "+e.listingId,source:e.source}}},components:{zBox:i.default,zButton:s.default,zInput:c.default,zLink:l.default,zSelect:d.default,zText:u.default}};t.default=m},"3ukl":function(e,t,r){"use strict";r.r(t);var n=r("17RM"),a=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=a.a},"8Qtb":function(e,t,r){"use strict";r("/TYn")},IZhM:function(e,t,r){"use strict";var n=r("63Ad");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("1eTU")),o=n(r("c2II")),i=n(r("Fba8")),s=n(r("ZqVW")),l=n(r("RO1x")),u=n(r("D8Yr")),c=n(r("0oY5"));t.default={name:"oz-report-listing",props:{listingId:{type:String,required:!0}},data:function(){return{success:!1}},mounted:function(){},methods:{openModal:function(){this.$refs.reportModal.open()},close:function(){setTimeout(this.reset,1e3)},closeModal:function(){this.$refs.reportModal.close(),setTimeout(this.reset,1e3)},reportSent:function(){this.success=!0},reset:function(){this.success=!1}},components:{zBox:a.default,zButton:o.default,zContainer:i.default,zLink:s.default,zModal:l.default,ozReportListingForm:c.default,zText:u.default}}},"MJX+":function(e,t,r){"use strict";r.r(t);var n=r("PQjy"),a=r("3ukl");for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);var i=r("psIG"),s=Object(i.a)(a.default,n.a,n.b,!1,null,null,null);t.default=s.exports},PQjy:function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c||e.$createElement;return t("form",[t("z-select",{ref:"reasonType",attrs:{label:"Descreva qual foi o problema encontrado no an\xfancio:",required:"",invalid:e.reasonTypeError,"invalid-message":"Por favor, informe o tipo de problema"},model:{value:e.report.reasonType,callback:function(t){e.$set(e.report,"reasonType",t)},expression:"report.reasonType"}},[t("option",{attrs:{value:""}},[e._v("Tipo de problema")]),e._l(e.selectOptions,(function(r,n){return t("option",{key:n,domProps:{value:r.value}},[e._v("\n      "+e._s(r.text)+"\n    ")])}))],2),t("z-input",{ref:"description",attrs:{label:"Descri\xe7\xe3o do problema",type:"textarea",required:"","invalid-message":"Por favor, informe a descri\xe7\xe3o do problema","floating-label":""},model:{value:e.report.description,callback:function(t){e.$set(e.report,"description",t)},expression:"report.description"}}),t("z-input",{ref:"name",attrs:{label:"Nome",type:"text",required:"","invalid-message":"Por favor, informe seu nome","floating-label":""},model:{value:e.report.requesterName,callback:function(t){e.$set(e.report,"requesterName",t)},expression:"report.requesterName"}}),t("z-input",{ref:"email",attrs:{label:"Email",type:"email",required:"","invalid-message":"Por favor, informe um e-mail v\xe1lido","floating-label":""},model:{value:e.report.requesterEmail,callback:function(t){e.$set(e.report,"requesterEmail",t)},expression:"report.requesterEmail"}}),e.reportSendError?t("z-box",{attrs:{gutter:{top:"normal"}}},[t("z-text",{attrs:{size:"small"}},[e._v("Erro ao enviar Reportar erro ou denunciar an\xfancio, tente novamente.")])],1):e._e(),t("z-box",{staticClass:"report-listing__action",attrs:{display:"flex","align-items":"center","justify-content":"between"}},[t("z-text",{staticClass:"report-listing__description",attrs:{size:"small",color:"darker","no-margin":""}},[t("strong",[e._v("Aten\xe7\xe3o")]),e._v(": se voc\xea for o anunciante deste an\xfancio e deseja alterar os dados,\n      entre em contato com nossa "),t("z-link",{attrs:{href:"https://zapimoveis.zendesk.com/hc/pt-br/#360000820072",size:"small",weight:"normal",target:"_blank"}},[e._v("central de ajuda")]),e._v(".\n    ")],1),t("z-button",{staticClass:"report-listing__cta",attrs:{loading:e.loading,disabled:e.loading},nativeOn:{click:function(t){return e.sendReport(t)}}},[e._v("\n      Enviar\n    ")])],1)],1)},a=[];r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}))},Rtd2:function(e,t,r){"use strict";r.r(t);var n=r("kMVL"),a=r("ZA96");for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);r("8Qtb");var i=r("psIG"),s=Object(i.a)(a.default,n.a,n.b,!1,null,null,null);t.default=s.exports},VcxY:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;t.default=[{text:"Descri\xe7\xe3o com palavras inadequadas",value:"inappropriate_words"},{text:"Im\xf3vel n\xe3o existe",value:"unknown_property"},{text:"Im\xf3vel j\xe1 foi vendido ou alugado",value:"rented_or_sold_property"},{text:"Fotos com baixa qualidade",value:"low_quality_photo"},{text:"Im\xf3vel anunciado sem autoriza\xe7\xe3o",value:"unauthorized_property"},{text:"N\xe3o consigo falar com o anunciante",value:"unavailable_advertiser"},{text:"Endere\xe7o do im\xf3vel incorreto",value:"incorret_property_address"},{text:"Pre\xe7o do im\xf3vel incorreto",value:"incorret_property_price"},{text:"Outros",value:"other"}]},YpBx:function(e,t,r){"use strict";var n=r("63Ad");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("Rtd2"));t.default=a.default},ZA96:function(e,t,r){"use strict";r.r(t);var n=r("IZhM"),a=r.n(n);for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);t.default=a.a},gLbD:function(e,t,r){"use strict";var n=r("63Ad");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("OeNs")),o=n(r("fQe6"));t.default={send:function(e,t,r){void 0===r&&(r=o.default.create());var n=a.default.getZendeskUrl(e)+"/public/ticket";return r.post(n,JSON.stringify(t),{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data}))}}},kMVL:function(e,t,r){"use strict";var n=function(){var e=this,t=e._self._c||e.$createElement;return t("z-container",{staticClass:"report__wrapper"},[t("z-link",{attrs:{icon:"warning",weight:"normal"},nativeOn:{click:function(t){return e.openModal(t)}}},[e._v("\n    Reportar problema ou denunciar an\xfancio\n  ")]),t("z-modal",{ref:"reportModal",staticClass:"report-listing__modal",on:{"modal:close":e.close}},[e.success?t("z-box",{staticClass:"report-listing__success"},[t("z-text",{staticClass:"report-listing__success-title",attrs:{size:"large"}},[e._v("\n        Mensagem enviada!\n      ")]),t("z-text",{attrs:{color:"dark","no-margin":""}},[e._v("\n        Erro ou den\xfancia enviados com sucesso.\n        Vamos analisar a informa\xe7\xe3o que voc\xea nos encaminhou.\n      ")]),t("z-button",{staticClass:"report-listing__success-cta",attrs:{size:"small"},nativeOn:{click:function(t){return e.closeModal(t)}}},[e._v("\n        Ok\n      ")])],1):t("div",{staticClass:"report-listing__form"},[t("z-text",{staticClass:"report-listing__title",attrs:{size:"large",color:"darker","no-margin":""}},[e._v("\n        Reportar erro ou denunciar an\xfancio\n      ")]),t("oz-report-listing-form",{ref:"reportForm",attrs:{"listing-id":e.listingId},on:{"report:sent":e.reportSent}})],1),e.success?t("z-text",{staticClass:"report-listing__description",attrs:{size:"small",color:"darker","no-margin":""}},[t("strong",[e._v("Aten\xe7\xe3o")]),e._v(": se voc\xea for o anunciante deste an\xfancio e deseja alterar os dados,\n      entre em contato com nossa "),t("z-link",{attrs:{href:"https://zapimoveis.zendesk.com/hc/pt-br/#360000820072",size:"small",weight:"normal",target:"_blank"}},[e._v("central de ajuda")]),e._v(".\n    ")],1):e._e()],1)],1)},a=[];r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a}))}}]);